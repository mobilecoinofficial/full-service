[package]
name = "mc-wallet-service"
version = "0.1.0"
authors = ["MobileCoin"]
edition = "2018"

[[bin]]
name = "wallet-service"
path = "src/bin/main.rs"

[dependencies]
mc-account-keys = { path = "mobilecoin/account-keys" }
mc-api = { path = "mobilecoin/api" }
mc-attest-core = { path = "mobilecoin/attest/core" }
mc-common = { path = "mobilecoin/common", features = ["loggers"] }
mc-connection = { path = "mobilecoin/connection" }
mc-consensus-enclave-measurement = { path = "mobilecoin/consensus/enclave/measurement" }
mc-consensus-scp = { path = "mobilecoin/consensus/scp" }
mc-crypto-digestible = { path = "mobilecoin/crypto/digestible", features = ["derive"] }
mc-crypto-keys = { path = "mobilecoin/crypto/keys" }
mc-crypto-rand = { path = "mobilecoin/crypto/rand" }
mc-fog-report-connection = { path = "mobilecoin/fog/report/connection" }
mc-ledger-db = { path = "mobilecoin/ledger/db" }
mc-ledger-sync = { path = "mobilecoin/ledger/sync" }
mc-mobilecoind = { path = "mobilecoin/mobilecoind" }
mc-mobilecoind-api = { path = "mobilecoin/mobilecoind/api" }
mc-mobilecoind-json = { path = "mobilecoin/mobilecoind-json" }
mc-sgx-css = { path = "mobilecoin/sgx/css" }
mc-transaction-core = { path = "mobilecoin/transaction/core" }
mc-transaction-std = { path = "mobilecoin/transaction/std" }
mc-util-from-random = { path = "mobilecoin/util/from-random" }
mc-util-serial = { path = "mobilecoin/util/serial" }
mc-util-uri = { path = "mobilecoin/util/uri" }

crossbeam-channel = "0.4"
diesel = { version = "1.4", features = ["sqlite"] }
diesel_migrations = { version = "1.4.0", features = ["sqlite"] }
displaydoc = {version = "0.1", default-features = false }
dotenv = "0.15.0"
grpcio = "0.6.0"
hex = "0.4"
num_cpus = "1.12"
prost = { version = "0.6.1", default-features = false, features = ["prost-derive"] }
rand = "0.7"
retry = "0.5"
rocket = { version = "0.4.5", default-features = false }
rocket_contrib = { version = "0.4.5", default-features = false, features = ["json", "diesel_sqlite_pool"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
serde_derive = "1.0"
structopt = "0.3"
uuid = { version = "0.7", features = ["serde", "v4"] }

[dev-dependencies]
mc-connection-test-utils = { path = "mobilecoin/connection/test-utils" }
mc-fog-report-validation = { path = "mobilecoin/fog/report/validation", features = ["automock"] }
tempdir = "0.3"

[patch.crates-io]
prost = { git = "https://github.com/danburkert/prost", rev = "6113789f70b69709820becba4242824b4fb3ffec" }
prost-derive = { git = "https://github.com/danburkert/prost", rev = "6113789f70b69709820becba4242824b4fb3ffec" }

# slog is patched in order to build in no_std config with dynamic_keys feature on
# https://github.com/slog-rs/slog/pull/268
slog = { git = "https://github.com/mobilecoinofficial/slog", rev = "cc1562258b81353426d17a55b7447256fa6eabbf" }

# Patched to depend on crates that depend on digest 0.9
bulletproofs = { git = "https://github.com/eranrund/bulletproofs", rev = "e8e8ef45ecc6d31f1a9525140edc977351d0f780" }

# We need to patch aes-gcm so we can make some fields/functions/structs pub in order to have a constant time decrypt
aes-gcm = { git = "https://github.com/xoloki/AEADs", rev = "d1a8517d3dd867ed9c5794002add67992a42f6aa" }

# grpcio patched with metadata
grpcio = { git = "https://github.com/jcape/grpc-rs", rev = "2ad042e9e65ecb664a60e034d0a899a8760d81d3" }
# Code gen patched with metadata
grpcio-compiler = { git = "https://github.com/jcape/grpc-rs", rev = "2ad042e9e65ecb664a60e034d0a899a8760d81d3" }
